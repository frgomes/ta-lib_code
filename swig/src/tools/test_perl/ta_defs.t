#!/usr/bin/perl -w
#
# Simple test of ta_defs
# 

use strict;
use lib "../../../lib/perl";
use Test;
BEGIN { plan tests => 175 }

use Finance::TA v0.1.2;

print "TA-Lib ", TA_GetVersionString(), "\n";
print "Testing ta_defs...\n";

ok( defined $TA_INTEGER_MIN );
ok( defined $TA_INTEGER_MAX );
ok( $TA_REAL_MIN, -3e+37 );
ok( $TA_REAL_MAX, 3e+37 );
ok( $TA_INTEGER_DEFAULT, $TA_INTEGER_MIN-1 );
ok( $TA_REAL_DEFAULT, -4e+37 );

print "Testing TA_RetCode...\n";
ok( $TA_SUCCESS, 0 );
ok( $TA_LIB_NOT_INITIALIZE, 1 );
ok( $TA_BAD_PARAM, 2 );
ok( $TA_ALLOC_ERR, 3 );
ok( $TA_ACCESS_FAILED, 4 );
ok( $TA_NO_DATA_SOURCE, 5 );
ok( $TA_SYMBOL_NOT_FOUND, 6 );
ok( $TA_CATEGORY_NOT_FOUND, 7 );
ok( $TA_KEY_NOT_FOUND, 8 );
ok( $TA_INDEX_FILE_NOT_ACCESSIBLE, 9 );
ok( $TA_INDEX_NOT_VALID, 10 );
ok( $TA_INVALID_FIELD, 11 );
ok( $TA_INVALID_PATH, 12 );
ok( $TA_INTERNAL_ERR, 13 );
ok( $TA_FATAL_ERR, 14 );
ok( $TA_NO_NEW_DATA, 15 );
ok( $TA_NOT_SUPPORTED, 16 );
ok( $TA_END_OF_INDEX, 17 );
ok( $TA_ENOUGH_DATA, 18 );
ok( $TA_MISSING_FIELD, 19 );
ok( $TA_REDUNDANT_FIELD, 20 );
ok( $TA_INVALID_DATE, 21 );
ok( $TA_INVALID_PRICE, 22 );
ok( $TA_GROUP_NOT_FOUND, 23 );
ok( $TA_FUNC_NOT_FOUND, 24 );
ok( $TA_INVALID_HANDLE, 25 );
ok( $TA_INVALID_PARAM_HOLDER, 26 );
ok( $TA_INVALID_PARAM_HOLDER_TYPE, 27 );
ok( $TA_INVALID_PARAM_FUNCTION, 28 );
ok( $TA_INPUT_NOT_ALL_INITIALIZE, 29 );
ok( $TA_OUTPUT_NOT_ALL_INITIALIZE, 30 );
ok( $TA_OUT_OF_RANGE_START_INDEX, 31 );
ok( $TA_OUT_OF_RANGE_END_INDEX, 32 );
ok( $TA_BAD_OBJECT, 33 );
ok( $TA_MEM_LEAK, 34 );
ok( $TA_ADDR_NOT_FOUND, 35 );
ok( $TA_SOCKET_LIB_INIT_ERR, 36 );
ok( $TA_END_OF_STREAM, 37 );
ok( $TA_BAD_STREAM_CRC, 38 );
ok( $TA_UNSUPPORTED_STREAM_VERSION, 39 );
ok( $TA_BAD_STREAM_HEADER_CRC, 40 );
ok( $TA_BAD_STREAM_HEADER, 41 );
ok( $TA_BAD_STREAM_CONTENT, 42 );
ok( $TA_BAD_YAHOO_IDX_HDR, 43 );
ok( $TA_UNSUPORTED_YAHOO_IDX_VERSION, 44 );
ok( $TA_BAD_YAHOO_IDX_INDICATOR_AF, 45 );
ok( $TA_BAD_YAHOO_IDX_INDICATOR_EB, 46 );
ok( $TA_BAD_YAHOO_IDX_INDICATOR_F2, 47 );
ok( $TA_NO_INTERNET_CONNECTION, 48 );
ok( $TA_INTERNET_ACCESS_FAILED, 49 );
ok( $TA_INTERNET_OPEN_FAILED, 50 );
ok( $TA_INTERNET_NOT_OPEN_TRY_AGAIN, 51 );
ok( $TA_INTERNET_SERVER_CONNECT_FAILED, 52 );
ok( $TA_INTERNET_OPEN_REQUEST_FAILED, 53 );
ok( $TA_INTERNET_SEND_REQUEST_FAILED, 54 );
ok( $TA_INTERNET_READ_DATA_FAILED, 55 );
ok( $TA_UNSUPPORTED_COUNTRY, 56 );
ok( $TA_BAD_HTML_SYNTAX, 57 );
ok( $TA_PERIOD_NOT_AVAILABLE, 58 );
ok( $TA_FINISH_TABLE, 59 );
ok( $TA_INVALID_SECURITY_EXCHANGE, 60 );
ok( $TA_INVALID_SECURITY_SYMBOL, 61 );
ok( $TA_INVALID_SECURITY_COUNTRY, 62 );
ok( $TA_INVALID_SECURITY_TYPE, 63 );
ok( $TA_MISSING_DATE_OR_TIME_FIELD, 64 );
ok( $TA_OBJECT_NOT_EQUAL, 65 );
ok( $TA_INVALID_LIST_TYPE, 66 );
ok( $TA_YAHOO_IDX_EXPIRED, 67 );
ok( $TA_YAHOO_IDX_UNAVAILABLE_1, 68 );
ok( $TA_YAHOO_IDX_FAILED, 69 );
ok( $TA_LIBCURL_GLOBAL_INIT_FAILED, 70 );
ok( $TA_LIBCURL_INIT_FAILED, 71 );
ok( $TA_INSTRUMENT_ID_BAD, 72 );
ok( $TA_TRADE_LOG_NOT_INITIALIZED, 73 );
ok( $TA_BAD_TRADE_TYPE, 74 );
ok( $TA_BAD_START_DATE, 75 );
ok( $TA_BAD_END_DATE, 76 );
ok( $TA_INTERNET_SET_RX_TIMEOUT_FAILED, 77 );
ok( $TA_NO_TRADE_LOG, 78 );
ok( $TA_ENTRY_TRANSACTION_MISSING, 79 );
ok( $TA_INVALID_VALUE_ID, 80 );
ok( $TA_BAD_STARTING_CAPITAL, 81 );
ok( $TA_TRADELOG_ALREADY_ADDED, 82 );
ok( $TA_YAHOO_IDX_UNAVAILABLE_2, 83 );
ok( $TA_YAHOO_IDX_UNAVAILABLE_3, 84 );
ok( $TA_NO_WEEKDAY_IN_DATE_RANGE, 85 );
ok( $TA_VALUE_NOT_APPLICABLE, 86 );
ok( $TA_DATA_GAP, 87 );
ok( $TA_NOT_IMPLEMENTED, 88 );
ok( $TA_PM_REFERENCE_EXIST, 89 );
ok( $TA_PRICE_BAR_CONTAINS_ZERO, 90 );
ok( $TA_MISSING_CLOSE_PRICE_FIELD, 91 );
ok( $TA_UNSUPPORTED_REPLACE_ZERO_PRICE_BAR, 92 );
ok( $TA_MISSING_INPUT_DIGITS, 93 );
ok( $TA_DICT_TYPE_MISMATCH, 94 );
ok( $TA_YAHOO_IDX_UNAVAILABLE_4, 95 );
ok( $TA_OBSOLETED_SYMBOL, 96 );
ok( $TA_BAD_QUERY, 97 );
ok( $TA_UNSUPPORTED_DO_NOT_SPLIT_ADJUST, 98 );
ok( $TA_UNSUPPORTED_DO_NOT_VALUE_ADJUST, 99 );
ok( $TA_MISSING_PRICE_FOR_ADJUSTMENT, 100 );
ok( $TA_INVALID_DATABASE_TYPE, 101 );
ok( $TA_UNEXPECTED_SQL_TYPE, 102 );
ok( $TA_UNEXPECTED_SQL_TYPE_FOR_OPEN, 103 );
ok( $TA_UNEXPECTED_SQL_TYPE_FOR_HIGH, 104 );
ok( $TA_UNEXPECTED_SQL_TYPE_FOR_LOW, 105 );
ok( $TA_UNEXPECTED_SQL_TYPE_FOR_CLOSE, 106 );
ok( $TA_UNEXPECTED_SQL_TYPE_FOR_VOLUME, 107 );
ok( $TA_UNEXPECTED_SQL_TYPE_FOR_OI, 108 );
ok( $TA_IP_NOSOCKETS, 700 );
ok( $TA_IP_BADHOST, 701 );
ok( $TA_IP_BADSERVICE, 702 );
ok( $TA_IP_BADPROTOCOL, 703 );
ok( $TA_IP_SOCKETERROR, 704 );
ok( $TA_IP_CONNECTERROR, 705 );
ok( $TA_IP_BINDERROR, 706 );
ok( $TA_IP_LISTENERROR, 707 );
ok( $TA_IP_WRITE_ERROR, 708 );
ok( $TA_IP_READ_ERROR, 709 );
ok( $TA_IP_UNKNOWN_ERR, 710 );
ok( $TA_HTTP_NO_HEADER, 800 );
ok( $TA_HTTP_SC_301, 801 );
ok( $TA_HTTP_SC_302, 802 );
ok( $TA_HTTP_SC_304, 803 );
ok( $TA_HTTP_SC_400, 804 );
ok( $TA_HTTP_SC_401, 805 );
ok( $TA_HTTP_SC_403, 806 );
ok( $TA_HTTP_SC_404, 807 );
ok( $TA_HTTP_SC_500, 808 );
ok( $TA_HTTP_SC_501, 809 );
ok( $TA_HTTP_SC_502, 810 );
ok( $TA_HTTP_SC_503, 811 );
ok( $TA_HTTP_SC_UNKNOWN, 812 );
ok( $TA_INTERNAL_ERROR, 5000 );
ok( $TA_UNKNOWN_ERR, 0xFFFF );

print "Testing TA_Compatibility\n";
ok( $TA_COMPATIBILITY_DEFAULT, 0 );
ok( $TA_COMPATIBILITY_METASTOCK, 1 );

print "Testing TA_MAType\n";
ok( $TA_MAType_SMA, 0 );
ok( $TA_MAType_EMA, 1 );
ok( $TA_MAType_WMA, 2 );
ok( $TA_MAType_DEMA, 3 );
ok( $TA_MAType_TEMA, 4 );
ok( $TA_MAType_TRIMA, 5 );
ok( $TA_MAType_KAMA, 6 );
ok( $TA_MAType_MAMA, 7 );
ok( $TA_MAType_T3, 8 );

print "Testing TA_FuncUnstId\n";
ok( $TA_FUNC_UNST_EMA, 0 );
ok( $TA_FUNC_UNST_HT_TRENDLINE, 1 );
ok( $TA_FUNC_UNST_KAMA, 2 );
ok( $TA_FUNC_UNST_MAMA, 3 );
ok( $TA_FUNC_UNST_T3, 4 );
ok( $TA_FUNC_UNST_ATR, 5 );
ok( $TA_FUNC_UNST_ADX, 6 );
ok( $TA_FUNC_UNST_ADXR, 7 );
ok( $TA_FUNC_UNST_DX, 8 );
ok( $TA_FUNC_UNST_MFI, 9 );
ok( $TA_FUNC_UNST_MINUS_DI, 10 );
ok( $TA_FUNC_UNST_MINUS_DM, 11 );
ok( $TA_FUNC_UNST_PLUS_DI, 12 );
ok( $TA_FUNC_UNST_PLUS_DM, 13 );
ok( $TA_FUNC_UNST_RSI, 14 );
ok( $TA_FUNC_UNST_STOCHRSI, 15 );
ok( $TA_FUNC_UNST_HT_DCPERIOD, 16 );
ok( $TA_FUNC_UNST_HT_DCPHASE, 17 );
ok( $TA_FUNC_UNST_HT_PHASOR, 18 );
ok( $TA_FUNC_UNST_HT_SINE, 19 );
ok( $TA_FUNC_UNST_HT_TRENDMODE, 20 );
ok( $TA_FUNC_UNST_ALL > 0 );
ok( $TA_FUNC_UNST_NONE, -1 );

print "Done.\n";
